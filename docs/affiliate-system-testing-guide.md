# æ¨å¹¿ç ç³»ç»Ÿæµ‹è¯•æŒ‡å—

æœ¬æ–‡æ¡£æä¾›æ¨å¹¿ç ï¼ˆAffiliate Codeï¼‰ç³»ç»Ÿçš„å®Œæ•´æµ‹è¯•æµç¨‹å’Œåœºæ™¯ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚

## æµ‹è¯•å‰å‡†å¤‡

### 1. æ•°æ®åº“å‡†å¤‡

æ‰§è¡Œä»¥ä¸‹ SQL åˆ›å»ºå¿…è¦çš„è¡¨å’Œèœå•ï¼š

```bash
# æ‰§è¡Œè¿ç§»åˆ›å»ºè¡¨
php artisan migrate --path=database/migrations/2026_01_11_000001_create_affiliate_codes_tables.php

# æ·»åŠ ç®¡ç†èœå•
mysql -u your_user -p your_database < database/sql/add_affiliate_code_menu.sql
```

### 2. æµ‹è¯•æ•°æ®å‡†å¤‡

åœ¨ç®¡ç†åå°åˆ›å»ºä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š

**å•†å“**ï¼š
- å•†å“ ID: 3ï¼ˆç¡®ä¿è¯¥å•†å“å­˜åœ¨ï¼‰

**ä¼˜æƒ ç **ï¼ˆåœ¨ä¼˜æƒ ç ç®¡ç†ä¸­åˆ›å»ºï¼‰ï¼š
- ä¼˜æƒ ç 1: `DISCOUNT5`ï¼Œä¼˜æƒ  5 å…ƒï¼Œå…³è”å•†å“ ID 3
- ä¼˜æƒ ç 2: `SUMMER20`ï¼Œä¼˜æƒ  20 å…ƒï¼Œå…³è”å•†å“ ID 3
- ä¼˜æƒ ç 3: `VIP50`ï¼Œä¼˜æƒ  50 å…ƒï¼Œå…³è”å•†å“ ID 3
- ä¼˜æƒ ç 4: `PRODUCT5ONLY`ï¼Œä¼˜æƒ  30 å…ƒï¼Œä»…å…³è”å•†å“ ID 5ï¼ˆä¸å…³è”å•†å“ 3ï¼‰

## æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1ï¼šç®¡ç†å‘˜åˆ›å»ºæ¨å¹¿ç ï¼ˆå¤šä¼˜æƒ ç å…³è”ï¼‰

**ç›®çš„**ï¼šéªŒè¯æ¨å¹¿ç è‡ªåŠ¨ç”Ÿæˆå’Œå¤šé€‰ä¼˜æƒ ç åŠŸèƒ½

**æ­¥éª¤**ï¼š
1. ç™»å½•ç®¡ç†åå° `/admin`
2. è¿›å…¥"ä¼˜æƒ ç ç®¡ç†" â†’ "Affiliate_Code"ï¼ˆæ¨å¹¿ç ç®¡ç†ï¼‰
3. ç‚¹å‡»"æ–°å¢"æŒ‰é’®
4. **ä¸è¦å¡«å†™æ¨å¹¿ç å­—æ®µ**ï¼ˆåº”è¯¥éšè—æˆ–åªè¯»ï¼‰
5. åœ¨"å…³è”ä¼˜æƒ ç "ä¸­é€‰æ‹©å¤šä¸ªä¼˜æƒ ç ï¼š`DISCOUNT5`ã€`SUMMER20`ã€`VIP50`
6. å¡«å†™å¤‡æ³¨ï¼š"æµ‹è¯•æ¨å¹¿ç  - å¤šä¼˜æƒ ç "
7. ä¿æŒ"æ˜¯å¦å¯ç”¨"ä¸ºå¼€å¯çŠ¶æ€
8. ç‚¹å‡»"æäº¤"

**é¢„æœŸç»“æœ**ï¼š
- âœ… é¡µé¢æç¤ºåˆ›å»ºæˆåŠŸ
- âœ… è¿”å›åˆ—è¡¨é¡µï¼Œæ˜¾ç¤ºæ–°åˆ›å»ºçš„æ¨å¹¿ç ï¼ˆ8ä½éšæœºå­—æ¯+æ•°å­—ï¼Œä¾‹å¦‚ï¼š`aB3dE5Fg`ï¼‰
- âœ… "å…³è”ä¼˜æƒ ç "åˆ—æ˜¾ç¤ºï¼š`DISCOUNT5, SUMMER20, VIP50`
- âœ… ä½¿ç”¨æ¬¡æ•°ä¸º 0
- âœ… çŠ¶æ€ä¸º"å¯ç”¨"
- âœ… æ¨å¹¿ç å¯ä»¥ä¸€é”®å¤åˆ¶

**è®°å½•æ¨å¹¿ç **ï¼šå°†ç”Ÿæˆçš„æ¨å¹¿ç è®°å½•ä¸‹æ¥ï¼Œä¾‹å¦‚ï¼š`test123`ï¼ˆç”¨äºåç»­æµ‹è¯•ï¼‰

---

### åœºæ™¯ 2ï¼šå…¨å±€æ¨å¹¿ç æ•è·

**ç›®çš„**ï¼šéªŒè¯ä»»æ„é¡µé¢éƒ½èƒ½æ•è· URL ä¸­çš„ aff å‚æ•°

**æ­¥éª¤**ï¼š
1. æ‰“å¼€æµè§ˆå™¨ï¼ˆå»ºè®®ä½¿ç”¨ Chromeï¼‰
2. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12 â†’ Console æ ‡ç­¾ï¼‰
3. è®¿é—®é¦–é¡µå¹¶é™„å¸¦æ¨å¹¿ç å‚æ•°ï¼š
   ```
   https://your-domain.com/?aff=test123
   ```
4. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`[Affiliate] æ¨å¹¿ç å·²ä¿å­˜: test123`
- âœ… æ‰“å¼€ Application æ ‡ç­¾ â†’ Local Storage â†’ æŸ¥çœ‹ `affCode` é”®
- âœ… `affCode` çš„å€¼ä¸º `test123`
- âœ… åˆ·æ–°é¡µé¢ï¼ŒlocalStorage ä¸­çš„å€¼ä»ç„¶å­˜åœ¨

---

### åœºæ™¯ 3ï¼šè´­ä¹°é¡µé¢è‡ªåŠ¨å¡«å……ï¼ˆå¤šä¼˜æƒ ç åœºæ™¯ï¼‰

**ç›®çš„**ï¼šéªŒè¯è´­ä¹°é¡µé¢è‡ªåŠ¨å¡«å……ä¼˜æƒ é‡‘é¢æœ€å¤§çš„ä¼˜æƒ ç 

**æ­¥éª¤**ï¼š
1. ç¡®ä¿ localStorage ä¸­æœ‰æ¨å¹¿ç ï¼ˆåœºæ™¯ 2 å·²è®¾ç½®ï¼‰
2. è®¿é—®å•†å“è´­ä¹°é¡µé¢ï¼ˆä¸å¸¦ aff å‚æ•°ï¼‰ï¼š
   ```
   https://your-domain.com/buy/3
   ```
3. è§‚å¯Ÿä¼˜æƒ ç è¾“å…¥æ¡†

**é¢„æœŸç»“æœ**ï¼š
- âœ… é¡µé¢åŠ è½½å®Œæˆåï¼Œæ§åˆ¶å°æ˜¾ç¤ºï¼š
  ```
  [Affiliate] æ£€æµ‹åˆ°æ¨å¹¿ç : test123
  [Affiliate] ä¼˜æƒ ç å·²è‡ªåŠ¨å¡«å……: VIP50 ä¼˜æƒ é‡‘é¢: 50
  ```
- âœ… ä¼˜æƒ ç è¾“å…¥æ¡†è‡ªåŠ¨å¡«å……ä¸º `VIP50`ï¼ˆä¼˜æƒ é‡‘é¢æœ€å¤§çš„ï¼‰
- âœ… è¾“å…¥æ¡†ä¸‹æ–¹æ˜¾ç¤ºç»¿è‰²æç¤ºï¼š"âœ“ å·²è‡ªåŠ¨åº”ç”¨æ¨å¹¿ä¼˜æƒ ç "
- âœ… è¾“å…¥æ¡†**ä¿æŒå¯ç¼–è¾‘**ï¼ˆå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ï¼‰
- âœ… æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œéšè—å­—æ®µ `affiliate_code` çš„å€¼ä¸º `test123`

---

### åœºæ™¯ 4ï¼šç”¨æˆ·æ‰‹åŠ¨ä¿®æ”¹ä¼˜æƒ ç 

**ç›®çš„**ï¼šéªŒè¯ç”¨æˆ·å¯ä»¥ä¿®æ”¹è‡ªåŠ¨å¡«å……çš„ä¼˜æƒ ç ï¼Œæç¤ºä¼šæ¶ˆå¤±

**æ­¥éª¤**ï¼š
1. åœ¨åœºæ™¯ 3 çš„åŸºç¡€ä¸Šï¼Œæ‰‹åŠ¨ä¿®æ”¹ä¼˜æƒ ç è¾“å…¥æ¡†
2. å°† `VIP50` æ”¹ä¸º `SUMMER20`
3. è§‚å¯Ÿæç¤ºå˜åŒ–

**é¢„æœŸç»“æœ**ï¼š
- âœ… ç»¿è‰²æç¤º"âœ“ å·²è‡ªåŠ¨åº”ç”¨æ¨å¹¿ä¼˜æƒ ç "ç«‹å³æ¶ˆå¤±
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`[Affiliate] ç”¨æˆ·æ‰‹åŠ¨ä¿®æ”¹äº†ä¼˜æƒ ç `
- âœ… å¦‚æœæ”¹å› `VIP50`ï¼Œæç¤ºä¼šé‡æ–°æ˜¾ç¤º

---

### åœºæ™¯ 5ï¼šå®Œæˆè®¢å•å¹¶éªŒè¯ç»Ÿè®¡

**ç›®çš„**ï¼šéªŒè¯è®¢å•åˆ›å»ºåæ¨å¹¿ç ä½¿ç”¨æ¬¡æ•°å¢åŠ 

**æ­¥éª¤**ï¼š
1. åœ¨åœºæ™¯ 3 çš„åŸºç¡€ä¸Šï¼ˆä¼˜æƒ ç ä¸º `VIP50`ï¼‰
2. å¡«å†™å¿…å¡«ä¿¡æ¯ï¼ˆé‚®ç®±ã€æ•°é‡ç­‰ï¼‰
3. é€‰æ‹©æ”¯ä»˜æ–¹å¼
4. æäº¤è®¢å•
5. å®Œæˆæ”¯ä»˜ï¼ˆæˆ–æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸï¼‰
6. è¿”å›ç®¡ç†åå° â†’ æ¨å¹¿ç ç®¡ç†

**é¢„æœŸç»“æœ**ï¼š
- âœ… è®¢å•åˆ›å»ºæˆåŠŸ
- âœ… è®¢å•ä»·æ ¼æ­£ç¡®åº”ç”¨äº† 50 å…ƒä¼˜æƒ 
- âœ… ç®¡ç†åå°ä¸­ï¼Œæ¨å¹¿ç  `test123` çš„"ä½¿ç”¨æ¬¡æ•°"ä» 0 å˜ä¸º 1
- âœ… ä¼˜æƒ ç  `VIP50` çš„ä½¿ç”¨æ¬¡æ•°ä¹Ÿ +1ï¼ˆé€šè¿‡ç°æœ‰ä¼˜æƒ ç ç³»ç»Ÿï¼‰

---

### åœºæ™¯ 6ï¼šæ¨å¹¿ç æ— æ•ˆæˆ–ç¦ç”¨

**ç›®çš„**ï¼šéªŒè¯æ— æ•ˆæ¨å¹¿ç çš„é™çº§å¤„ç†

**æ­¥éª¤**ï¼š
1. æ¸…é™¤ localStorage æˆ–æ‰‹åŠ¨è®¾ç½®æ— æ•ˆæ¨å¹¿ç ï¼š
   ```javascript
   localStorage.setItem('affCode', 'invalidcode999');
   ```
2. è®¿é—®è´­ä¹°é¡µé¢ `/buy/3`
3. è§‚å¯Ÿä¼˜æƒ ç è¾“å…¥æ¡†

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`[Affiliate] æ¨å¹¿ç æ— æ•ˆæˆ–ä¸é€‚ç”¨äºå½“å‰å•†å“`
- âœ… ä¼˜æƒ ç è¾“å…¥æ¡†ä¸ºç©º
- âœ… æ²¡æœ‰æ˜¾ç¤ºç»¿è‰²æç¤º
- âœ… ç”¨æˆ·å¯ä»¥æ­£å¸¸æ‰‹åŠ¨è¾“å…¥ä¼˜æƒ ç å®Œæˆè´­ä¹°

---

### åœºæ™¯ 7ï¼šä¼˜æƒ ç ä¸é€‚ç”¨äºå½“å‰å•†å“

**ç›®çš„**ï¼šéªŒè¯å…³è”ä¼˜æƒ ç éƒ½ä¸é€‚ç”¨æ—¶çš„å¤„ç†

**æ­¥éª¤**ï¼š
1. åœ¨ç®¡ç†åå°åˆ›å»ºæ–°æ¨å¹¿ç  `test456`
2. å…³è”ä¼˜æƒ ç  `PRODUCT5ONLY`ï¼ˆä»…é€‚ç”¨äºå•†å“ 5ï¼‰
3. è®¾ç½® localStorageï¼š
   ```javascript
   localStorage.setItem('affCode', 'test456');
   ```
4. è®¿é—®å•†å“ 3 çš„è´­ä¹°é¡µé¢ `/buy/3`

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`[Affiliate] æ¨å¹¿ç æ— æ•ˆæˆ–ä¸é€‚ç”¨äºå½“å‰å•†å“`
- âœ… ä¼˜æƒ ç è¾“å…¥æ¡†ä¸ºç©ºï¼ˆå› ä¸ºå…³è”çš„ä¼˜æƒ ç éƒ½ä¸é€‚ç”¨å•†å“ 3ï¼‰
- âœ… ç”¨æˆ·å¯ä»¥æ­£å¸¸è´­ä¹°

---

### åœºæ™¯ 8ï¼šç›´æ¥è®¿é—®è´­ä¹°é¡µé¢ï¼ˆå¸¦ aff å‚æ•°ï¼‰

**ç›®çš„**ï¼šéªŒè¯ç›´æ¥è®¿é—®å¸¦æ¨å¹¿ç çš„è´­ä¹°é¡µé¢

**æ­¥éª¤**ï¼š
1. æ¸…é™¤ localStorage
2. ç›´æ¥è®¿é—®ï¼š
   ```
   https://your-domain.com/buy/3?aff=test123
   ```
3. è§‚å¯Ÿæ•ˆæœ

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤ºæ¨å¹¿ç å·²ä¿å­˜
- âœ… ä¼˜æƒ ç è‡ªåŠ¨å¡«å……ä¸º `VIP50`
- âœ… æ˜¾ç¤ºç»¿è‰²æç¤º

---

### åœºæ™¯ 9ï¼šç®¡ç†åå°ç¼–è¾‘æ¨å¹¿ç 

**ç›®çš„**ï¼šéªŒè¯ç¼–è¾‘æ—¶æ¨å¹¿ç åªè¯»ï¼Œä½†å¯ä¿®æ”¹å…³è”ä¼˜æƒ ç 

**æ­¥éª¤**ï¼š
1. è¿›å…¥ç®¡ç†åå° â†’ æ¨å¹¿ç ç®¡ç†
2. ç‚¹å‡»æ¨å¹¿ç  `test123` çš„"ç¼–è¾‘"æŒ‰é’®
3. å°è¯•ä¿®æ”¹æ¨å¹¿ç å­—æ®µ
4. ä¿®æ”¹å…³è”ä¼˜æƒ ç ï¼ˆå–æ¶ˆé€‰æ‹© `DISCOUNT5`ï¼Œä¿ç•™ `SUMMER20` å’Œ `VIP50`ï¼‰
5. ç‚¹å‡»"æäº¤"

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ¨å¹¿ç å­—æ®µä¸ºåªè¯»æ˜¾ç¤ºï¼ˆæ— æ³•ä¿®æ”¹ï¼‰
- âœ… å…³è”ä¼˜æƒ ç æˆåŠŸä¿®æ”¹ä¸ºï¼š`SUMMER20, VIP50`
- âœ… ä½¿ç”¨æ¬¡æ•°å­—æ®µä¸ºåªè¯»æ˜¾ç¤º
- âœ… å¯ä»¥ä¿®æ”¹å¤‡æ³¨å’Œå¯ç”¨çŠ¶æ€

---

### åœºæ™¯ 10ï¼šæ¨å¹¿ç ç¦ç”¨æµ‹è¯•

**ç›®çš„**ï¼šéªŒè¯ç¦ç”¨æ¨å¹¿ç åå‰ç«¯ä¸åº”ç”¨

**æ­¥éª¤**ï¼š
1. åœ¨ç®¡ç†åå°ç¦ç”¨æ¨å¹¿ç  `test123`ï¼ˆå°†"æ˜¯å¦å¯ç”¨"å¼€å…³å…³é—­ï¼‰
2. è®¿é—®è´­ä¹°é¡µé¢ `/buy/3`ï¼ˆlocalStorage ä¸­ä»æœ‰ `test123`ï¼‰

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`[Affiliate] æ¨å¹¿ç æ— æ•ˆæˆ–ä¸é€‚ç”¨äºå½“å‰å•†å“`
- âœ… ä¼˜æƒ ç è¾“å…¥æ¡†ä¸ºç©º
- âœ… ç¦ç”¨çš„æ¨å¹¿ç ä¸å½±å“ç”¨æˆ·æ­£å¸¸è´­ä¹°

---

### åœºæ™¯ 11ï¼šä¸€é”®å¤åˆ¶æ¨å¹¿ç 

**ç›®çš„**ï¼šéªŒè¯ç®¡ç†åå°çš„å¤åˆ¶åŠŸèƒ½

**æ­¥éª¤**ï¼š
1. è¿›å…¥ç®¡ç†åå° â†’ æ¨å¹¿ç ç®¡ç†åˆ—è¡¨
2. æ‰¾åˆ°æ¨å¹¿ç  `test123`
3. ç‚¹å‡»æ¨å¹¿ç æ—è¾¹çš„å¤åˆ¶å›¾æ ‡

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ¨å¹¿ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
- âœ… é¡µé¢æç¤º"å¤åˆ¶æˆåŠŸ"

---

### åœºæ™¯ 12ï¼šæ¨å¹¿ç è¯¦æƒ…é¡µ

**ç›®çš„**ï¼šéªŒè¯è¯¦æƒ…é¡µæ˜¾ç¤ºå®Œæ•´ä¿¡æ¯

**æ­¥éª¤**ï¼š
1. è¿›å…¥ç®¡ç†åå° â†’ æ¨å¹¿ç ç®¡ç†åˆ—è¡¨
2. ç‚¹å‡»æ¨å¹¿ç  `test123` çš„"è¯¦æƒ…"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤ºæ¨å¹¿ç ï¼š`test123`
- âœ… æ˜¾ç¤ºå…³è”ä¼˜æƒ ç åˆ—è¡¨ï¼š
  - `SUMMER20 (20å…ƒ)`
  - `VIP50 (50å…ƒ)`
- âœ… æ˜¾ç¤ºä½¿ç”¨æ¬¡æ•°ï¼ˆä»åœºæ™¯ 5 çš„ç»Ÿè®¡ï¼‰
- âœ… æ˜¾ç¤ºæ˜¯å¦å¯ç”¨ã€å¤‡æ³¨ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´

---

## API æ¥å£æµ‹è¯•

### æµ‹è¯• API ç«¯ç‚¹

**æ¥å£**ï¼š`GET /api/affiliate/coupon`

**æµ‹è¯• 1ï¼šæˆåŠŸè·å–ä¼˜æƒ ç **

```bash
curl "https://your-domain.com/api/affiliate/coupon?aff=test123&goods_id=3"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "coupon_code": "VIP50",
  "discount": 50.00,
  "message": "å·²è‡ªåŠ¨åº”ç”¨ä¼˜æƒ é‡‘é¢æœ€å¤§çš„ä¼˜æƒ ç "
}
```

**æµ‹è¯• 2ï¼šæ¨å¹¿ç æ— æ•ˆ**

```bash
curl "https://your-domain.com/api/affiliate/coupon?aff=invalid999&goods_id=3"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": false,
  "message": "æ¨å¹¿ç æ— æ•ˆæˆ–ä¸é€‚ç”¨äºå½“å‰å•†å“"
}
```

**æµ‹è¯• 3ï¼šç¼ºå°‘å¿…å¡«å‚æ•°**

```bash
curl "https://your-domain.com/api/affiliate/coupon?aff=test123"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": false,
  "message": "å•†å“IDå‚æ•° goods_id ä¸èƒ½ä¸ºç©º"
}
```

---

## æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

åœ¨ä»¥ä¸‹æµè§ˆå™¨ä¸­æ‰§è¡Œåœºæ™¯ 2-5ï¼š

- âœ… Chromeï¼ˆæœ€æ–°ç‰ˆï¼‰
- âœ… Firefoxï¼ˆæœ€æ–°ç‰ˆï¼‰
- âœ… Safariï¼ˆæœ€æ–°ç‰ˆï¼‰
- âœ… Edgeï¼ˆæœ€æ–°ç‰ˆï¼‰

**æ³¨æ„**ï¼šéšç§æ¨¡å¼ä¸‹ localStorage å¯èƒ½ä¸å¯ç”¨ï¼Œåº”è¯¥é™çº§ä¸ºç©ºè¾“å…¥æ¡†ï¼Œä¸å½±å“æ­£å¸¸è´­ä¹°ã€‚

---

## æ€§èƒ½æµ‹è¯•

### API å“åº”æ—¶é—´

ä½¿ç”¨ curl æµ‹è¯• API å“åº”æ—¶é—´ï¼š

```bash
curl -w "@curl-format.txt" -o /dev/null -s \
  "https://your-domain.com/api/affiliate/coupon?aff=test123&goods_id=3"
```

**é¢„æœŸ**ï¼šå“åº”æ—¶é—´ < 500ms

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šæ§åˆ¶å°æ²¡æœ‰æ˜¾ç¤ºæ—¥å¿—

**å¯èƒ½åŸå› **ï¼š
- JavaScript è¢«ç¼“å­˜ï¼Œå¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°è¿‡æ»¤å™¨è®¾ç½®

### é—®é¢˜ 2ï¼šä¼˜æƒ ç æ²¡æœ‰è‡ªåŠ¨å¡«å……

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ localStorage ä¸­æ˜¯å¦æœ‰ `affCode`
2. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰ AJAX é”™è¯¯
3. æ£€æŸ¥æ¨å¹¿ç æ˜¯å¦å¯ç”¨
4. æ£€æŸ¥å…³è”çš„ä¼˜æƒ ç æ˜¯å¦é€‚ç”¨å½“å‰å•†å“

### é—®é¢˜ 3ï¼šä½¿ç”¨æ¬¡æ•°æ²¡æœ‰å¢åŠ 

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥è®¢å•æ˜¯å¦åˆ›å»ºæˆåŠŸ
2. æŸ¥çœ‹ Laravel æ—¥å¿— `storage/logs/laravel.log`
3. æ£€æŸ¥æ˜¯å¦æœ‰ `[Affiliate]` ç›¸å…³çš„è­¦å‘Šæ—¥å¿—

---

## æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆæ‰€æœ‰æµ‹è¯•åï¼Œç¡®è®¤ä»¥ä¸‹æ£€æŸ¥é¡¹ï¼š

- [ ] æ¨å¹¿ç å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼ˆ8ä½éšæœºå­—ç¬¦ï¼‰
- [ ] æ¨å¹¿ç å¯ä»¥å…³è”å¤šä¸ªä¼˜æƒ ç 
- [ ] å…¨å±€è„šæœ¬å¯ä»¥æ•è·ä»»æ„é¡µé¢çš„ aff å‚æ•°
- [ ] è´­ä¹°é¡µé¢è‡ªåŠ¨å¡«å……ä¼˜æƒ é‡‘é¢æœ€å¤§çš„ä¼˜æƒ ç 
- [ ] ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è‡ªåŠ¨å¡«å……çš„ä¼˜æƒ ç 
- [ ] è®¢å•åˆ›å»ºåæ¨å¹¿ç ä½¿ç”¨æ¬¡æ•° +1
- [ ] æ— æ•ˆæ¨å¹¿ç ä¸å½±å“ç”¨æˆ·æ­£å¸¸è´­ä¹°
- [ ] ç®¡ç†åå°å¯ä»¥æ­£å¸¸ CRUD æ¨å¹¿ç 
- [ ] ç¼–è¾‘æ—¶æ¨å¹¿ç å­—æ®µåªè¯»
- [ ] æ¨å¹¿ç å¯ä»¥ä¸€é”®å¤åˆ¶
- [ ] API æ¥å£è¿”å›æ­£ç¡®çš„ JSON æ ¼å¼
- [ ] æ‰€æœ‰æµè§ˆå™¨å…¼å®¹

---

## æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

æµ‹è¯•å®Œæˆåï¼Œå¡«å†™ä»¥ä¸‹æŠ¥å‘Šï¼š

**æµ‹è¯•æ—¶é—´**ï¼šYYYY-MM-DD

**æµ‹è¯•äººå‘˜**ï¼š

**æµ‹è¯•ç¯å¢ƒ**ï¼š
- æ“ä½œç³»ç»Ÿï¼š
- æµè§ˆå™¨ï¼š
- æœåŠ¡å™¨ï¼š

**æµ‹è¯•ç»“æœ**ï¼š

| åœºæ™¯ç¼–å· | åœºæ™¯åç§° | æµ‹è¯•ç»“æœ | å¤‡æ³¨ |
|---------|---------|---------|------|
| 1 | ç®¡ç†å‘˜åˆ›å»ºæ¨å¹¿ç  | âœ… é€šè¿‡ / âŒ å¤±è´¥ | |
| 2 | å…¨å±€æ¨å¹¿ç æ•è· | âœ… é€šè¿‡ / âŒ å¤±è´¥ | |
| 3 | è´­ä¹°é¡µé¢è‡ªåŠ¨å¡«å…… | âœ… é€šè¿‡ / âŒ å¤±è´¥ | |
| ... | ... | ... | |

**å‘ç°çš„é—®é¢˜**ï¼š

1.

**å»ºè®®æ”¹è¿›**ï¼š

1.

---

**æµ‹è¯•å®Œæˆï¼** ğŸ‰
